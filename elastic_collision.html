<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>一維彈性碰撞</title>

<style>
body{
  text-align:center;
  font-family:Arial;
}
canvas{
  border:1px solid #000;
  background:#f5f5f5;
}
.controls{
  margin:12px 0;
}
.lesson{
  max-width:900px;
  margin:40px auto;
  text-align:left;
  line-height:1.8;
}
.lesson h3{
  border-left:6px solid #9C27B0;
  padding-left:10px;
}
</style>
</head>

<body>

<h2>一維彈性碰撞（滑桿設定質量與初速）</h2>

<canvas id="c" width="900" height="220"></canvas>

<!-- 球 A -->
<div class="controls">
<strong>球 A（紅色）</strong><br>
質量 m₁ (kg)
<input type="range" id="m1" min="1" max="5" step="0.5" value="2" oninput="updateLabels()">
<span id="m1v">2</span> kg
<br>
初速 u₁ (m/s)
<input type="range" id="u1" min="-5" max="5" step="0.5" value="2" oninput="updateLabels()">
<span id="u1v">2</span> m/s
</div>

<!-- 球 B -->
<div class="controls">
<strong>球 B（藍色）</strong><br>
質量 m₂ (kg)
<input type="range" id="m2" min="1" max="5" step="0.5" value="3" oninput="updateLabels()">
<span id="m2v">3</span> kg
<br>
初速 u₂ (m/s)
<input type="range" id="u2" min="-5" max="5" step="0.5" value="-1" oninput="updateLabels()">
<span id="u2v">-1</span> m/s
</div>

<button onclick="toggle()">開始 / 暫停</button>
<button onclick="reset()">重設</button>

<p id="info"></p>

<!-- 教學說明 -->
<div class="lesson">

<h3>一、原理說明</h3>
<p>
一維彈性碰撞指的是物體只沿一直線運動，且碰撞前後
<strong>總動量與總動能皆守恆</strong>。
</p>

<h3>二、公式表示（含符號說明）</h3>
<p>
動量守恆：<br>
m₁u₁ + m₂u₂ = m₁v₁ + m₂v₂
</p>
<p>
動能守恆：<br>
½m₁u₁² + ½m₂u₂² = ½m₁v₁² + ½m₂v₂²
</p>
<p>
m：質量(kg)　
u：碰撞前速度(m/s)　
v：碰撞後速度(m/s)
</p>

<h3>三、圖像理解</h3>
<p>
紅球與藍球在一直線上運動，當兩球接觸時速度會瞬間改變，
但系統總動量與動能保持不變。
</p>

<h3>四、適用範圍</h3>
<p>
理想彈性體、忽略摩擦與外力、碰撞時間極短。
</p>

<h3>五、常見應用</h3>
<p>
桌球碰撞、分子運動模型、彈珠遊戲。
</p>

<h3>六、教學延伸問題</h3>
<ol>
<li>
設定 m₁ = 2 kg、u₁ = 3 m/s，
m₂ = 4 kg、u₂ = 0，
請計算碰撞後 v₁、v₂。
</li>
<li>
若 m₁ = m₂ 且 u₂ = 0，
碰撞後速度會出現什麼特徵？
</li>
</ol>

<h3>七、教學延伸問題解答</h3>
<ol>
<li>
v₁ = −1 m/s，v₂ = 2 m/s
</li>
<li>
兩球會交換速度。
</li>
</ol>

</div>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");

let x1 = 250;
let x2 = 650;
let v1 = 0;
let v2 = 0;
let run = false;
let collided = false;

function updateLabels(){
  m1v.innerText = m1.value;
  m2v.innerText = m2.value;
  u1v.innerText = u1.value;
  u2v.innerText = u2.value;
}

function readInputs(){
  v1 = parseFloat(u1.value);
  v2 = parseFloat(u2.value);
}

function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  ctx.fillStyle="red";
  ctx.beginPath();
  ctx.arc(x1,110,15,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="blue";
  ctx.beginPath();
  ctx.arc(x2,110,15,0,Math.PI*2);
  ctx.fill();
}

function update(){
  if(!run) return;

  x1 += v1;
  x2 += v2;

  if(!collided && Math.abs(x1 - x2) <= 30){
    collided = true;

    const m1n = parseFloat(m1.value);
    const m2n = parseFloat(m2.value);
    const u1n = v1;
    const u2n = v2;

    v1 = (u1n*(m1n-m2n) + 2*m2n*u2n) / (m1n + m2n);
    v2 = (u2n*(m2n-m1n) + 2*m1n*u1n) / (m1n + m2n);
  }

  info.innerText =
  `m₁=${m1.value} kg | m₂=${m2.value} kg | v₁=${v1.toFixed(2)} m/s | v₂=${v2.toFixed(2)} m/s`;

  draw();
  requestAnimationFrame(update);
}

function toggle(){
  if(!run){
    readInputs();
  }
  run = !run;
  if(run) update();
}

function reset(){
  x1 = 250;
  x2 = 650;
  collided = false;
  readInputs();
  run = false;
  draw();
}

updateLabels();
draw();
</script>

</body>
</html>
